 
 
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>山湖城社区</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="keywords" content="山湖城,东莞,大岭山,同沙生态公园">
  <meta name="description" content="和谐社区，你我共建">
  <link rel="stylesheet" href="../res/layui/css/layui.css">
  <link rel="stylesheet" href="../res/css/global.css">
</head>
<body>
<div id="app">
<div class="fly-header layui-bg-black">
  <div class="layui-container">
    <a class="fly-logo" href="/">
      <img src="../res/images/logo.png">
    </a>
    <ul class="layui-nav fly-nav layui-hide-xs" style="display: none">
      <li class="layui-nav-item layui-this">
        <a href="/"><i class="iconfont icon-jiaoliu"></i>交流</a>
      </li>
      <li class="layui-nav-item">
        <a href="case/case.html"><i class="iconfont icon-iconmingxinganli"></i>案例</a>
      </li>
      <li class="layui-nav-item">
        <a href="http://www.layui.com/" target="_blank"><i class="iconfont icon-ui"></i>框架</a>
      </li>
    </ul>
    
    <ul class="layui-nav fly-nav-user" style="display: none">
      
      <!-- 未登入的状态 -->
      <li class="layui-nav-item">
        <a class="iconfont icon-touxiang layui-hide-xs" href="user/login.html"></a>
      </li>

      

    </ul>
  </div>
</div>

<div class="fly-panel fly-column">
  <div class="layui-container">
    <ul class="layui-clear">
      <li ><a href="javaScript:getPageList(1,null)">全部<span class="layui-badge-dot" v-if="type==null"></span></a></li>
      <li><a href="javaScript:getPageList(1,'share')">分享<span class="layui-badge-dot" v-if="type=='share'"></span></a></li>
      <li><a href="javaScript:getPageList(1,'ask')">提问<span class="layui-badge-dot" v-if="type=='ask'"></span></a></li>

      <li class="layui-hide-xs layui-hide-sm layui-show-md-inline-block"><span class="fly-mid"></span></li> 
      
      <!-- 用户登入后显示 -->
     <!-- <li class="layui-hide-xs layui-hide-sm layui-show-md-inline-block"><a href="user/index.html">我发表的贴</a></li>
      <li class="layui-hide-xs layui-hide-sm layui-show-md-inline-block"><a href="user/index.html#collection">我收藏的贴</a></li> -->
    </ul> 
    
    <div class="fly-column-right layui-hide-xs">
   <!--   <span class="fly-search"><i class="layui-icon"></i></span> -->
      <a href="jie/add.html" class="layui-btn">发表新帖</a> 
    </div> 
    <div class="layui-hide-sm layui-show-xs-block" style="margin-top: -10px; padding-bottom: 10px; text-align: center;">
      <a href="jie/add.html" class="layui-btn">发表新帖</a> 
    </div> 
  </div>
</div>

<div class="layui-container">
  <div class="layui-row layui-col-space15">
    <div class="layui-col-md8">

      <div class="fly-panel" style="margin-bottom: 0;">


        <ul class="fly-list">

          <li>
            <a href="user/home.html" class="fly-avatar">
              <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1546167126015&di=5a94b6e03bd95f9f9e7762115b87d3e4&imgtype=0&src=http%3A%2F%2Fpic.90sjimg.com%2Fdesign%2F00%2F67%2F59%2F63%2F58e89bee922a2.png">
            </a>
            <h2>
              <a class="layui-badge">公告</a>
              <a href="jie/gonggao.html">关于山湖城网络社区的公告，请认真阅读</a>
            </h2>
            <div class="fly-list-info">
              <a href="user/home.html" link>
                <cite>管理员</cite>
                <!--
                <i class="iconfont icon-renzheng" title="认证信息：XXX"></i>
                <i class="layui-badge fly-badge-vip">VIP3</i>
                -->
              </a>
              <span>2019-01-01</span>


            </div>
            <div class="fly-list-badge">
              <!--
              <span class="layui-badge layui-bg-black">置顶</span>
              <span class="layui-badge layui-bg-red">精帖</span>
              -->
            </div>

          </li>


          <hr class="layui-bg-orange">
          <li  v-for="item in topicList">
            <a href="user/home.html" class="fly-avatar">
              <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1546167126015&di=5a94b6e03bd95f9f9e7762115b87d3e4&imgtype=0&src=http%3A%2F%2Fpic.90sjimg.com%2Fdesign%2F00%2F67%2F59%2F63%2F58e89bee922a2.png">
            </a>
            <h2>
              <a class="layui-badge">{{item.tag}}</a>
              <a href="jie/detail.html">{{item.title}}</a>
            </h2>
            <div class="fly-list-info">
              <a href="user/home.html" link>
                <cite>热心邻居</cite>
                <!--
                <i class="iconfont icon-renzheng" title="认证信息：XXX"></i>
                <i class="layui-badge fly-badge-vip">VIP3</i>
                -->
              </a>
              <span>{{item.createTime}}</span>
              
             <!-- <span class="fly-list-kiss layui-hide-xs" title="阅读数"><i class="iconfont icon-kiss"></i> 60</span>-->
              <!--<span class="layui-badge fly-badge-accept layui-hide-xs">已结</span>-->
             <!-- <span class="fly-list-nums">
                <i class="iconfont icon-pinglun1" title="评论数"></i> 66
              </span>-->
            </div>
            <div class="fly-list-badge">
              <!--<span class="layui-badge layui-bg-red">精帖</span>-->
            </div>
          </li>
          <li style="display: none">
            <a href="user/home.html" class="fly-avatar">
              <img src="https://tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg" alt="贤心">
            </a>
            <h2>
              <a class="layui-badge">动态</a>
              <a href="jie/detail.html">基于 layui 的极简社区页面模版</a>
            </h2>
            <div class="fly-list-info">
              <a href="user/home.html" link>
                <cite>贤心</cite>
                <!--<i class="iconfont icon-renzheng" title="认证信息：XXX"></i>-->
                <i class="layui-badge fly-badge-vip">VIP3</i>
              </a>
              <span>刚刚</span>
              
              <span class="fly-list-kiss layui-hide-xs" title="悬赏飞吻"><i class="iconfont icon-kiss"></i> 60</span>
              <span class="layui-badge fly-badge-accept layui-hide-xs">已结</span>
              <span class="fly-list-nums"> 
                <i class="iconfont icon-pinglun1" title="回答"></i> 66
              </span>
            </div>
            <div class="fly-list-badge">
              <span class="layui-badge layui-bg-red">精帖</span>
            </div>
          </li>


        </ul>
        <div style="text-align: center">
          <div class="laypage-main">
            <a href="javaScript:getMorePageList()" class="laypage-next" v-if="totalPages>page" >更多求解</a>
            <span v-if="totalPages<=page">到底了</span>
          </div>
        </div>

      </div>
    </div>
    <div class="layui-col-md4">




      <dl class="fly-panel fly-list-one" style="display: none">
        <dt class="fly-panel-title">社区动态</dt>
        <dd>
          <a href="jie/detail.html">基于 layui 的极简社区页面模版</a>
          <span><i class="iconfont icon-pinglun1"></i> 16</span>
        </dd>


        <!-- 无数据时 -->
        <!--
        <div class="fly-none">没有相关数据</div>
        -->
      </dl>


      
      <div class="fly-panel fly-link">
        <h3 class="fly-panel-title">友情链接</h3>
        <dl class="fly-panel-main">
          <dd><a href="http://www.shanhucheng.cn/" target="_blank">山湖城</a><dd>
          <dd><a href="mailto:xianxin@layui-inc.com?subject=%E7%94%B3%E8%AF%B7Fly%E7%A4%BE%E5%8C%BA%E5%8F%8B%E9%93%BE" class="fly-link">申请友链</a><dd>
        </dl>
      </div>

    </div>
  </div>
</div>

<div class="fly-footer">
  <p><a href="http://topic.shanhucheng.cn/" target="_blank">山湖城社区</a> 2019 &copy; <a href="http://www.shanhucheng.cn/" target="_blank">shanhucheng.cn 出品</a></p>

</div>
</div>
<script src="../res/layui/layui.js"></script>
<script>
layui.cache.page = '';
layui.cache.user = {
  username: '游客'
  ,uid: -1
  ,avatar: '../res/images/avatar/00.jpg'
  ,experience: 83
  ,sex: '男'
};
layui.config({
  version: "3.0.0"
  ,base: '../res/mods/' //这里实际使用时，建议改成绝对路径
}).extend({
  fly: 'index'
}).use('fly');
</script>


<!-- 开发环境版本，包含了有帮助的命令行警告 -->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<!-- 生产环境版本，优化了尺寸和速度 -->
<!--<script src="https://cdn.jsdelivr.net/npm/vue"></script>-->

<script src="https://cdn.bootcss.com/jquery/3.3.1/core.js"></script>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            topicList: [],
            type:'',
            page:1,
            totalPages:0
        }
    })

    let $;
    layui.use(['jquery'], function(){
         $ = layui.jquery;
        getPageList(1,null);
    });

    function getMorePageList() {
        getPageList(app.page+1,app.type);
    }


    function getPageList(page ,type) {
        app.page=page;
        app.type=type;

        if(app.page==1){
            app.topicList=[];
        }
        $.ajax({
            url: "http://localhost:8888/info/pageList",
            type:'post',
            contentType:'application/json',
            data:JSON.stringify({
                "page": app.page,
                "query": {
                    "type": app.type
                },
                "size": 10
            }),
            cache: false,
            success: function(response){
                if(response.data.content.length>0){
                    $(response.data.content).each(function (index,e) {
                        console.log(JSON.stringify(e));
                        app.topicList.push(e);
                    });

                }

                app.totalPages=response.data.totalPages

            }
        });
    }

</script>


</body>
</html>